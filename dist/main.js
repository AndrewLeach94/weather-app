(()=>{"use strict";const e=async(e,t)=>{try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=62559260c941ebf6fd752e2570f6c760`,{mode:"cors"}),o=await n.json();"city not found"==o.message&&(()=>{const e=document.querySelector("#location-container"),t=document.createElement("p");t.textContent="Couldn't find this city. Please check your spelling",t.id="error_city",e.appendChild(t),setTimeout((function(){t.remove()}),4e3)})();const r=o.name,c=o.main.temp,a=o.main.feels_like,i=o.main.humidity,d=o.weather[0].main,u=o.wind.speed,p=e=>{document.querySelector("#current-city").textContent=e},h=e=>{document.querySelector("#current-conditions").textContent=e},g=e=>{document.querySelector("#current-humidity").textContent=`Humidity:  ${e}%`},v=e=>{const t=Math.round(e);document.querySelector("#current-feel").textContent=`Feels Like: ${t}Â°`},w=e=>{const n=Math.round(e);document.querySelector("#current-wind").textContent="imperial"==t?`Wind: ${n} mph`:`Wind: ${n} kph`};(e=>{const t=Math.round(e);document.querySelector("#current-temperature").textContent=t+"Â°"})(c),p(r),h(d),g(i),v(a),w(u),"Clouds"==d?l():"Mist"==d||"Rain"==d?m():"Snow"==d?y():s()}catch(e){console.error("Something went wrong with the current conditions")}},t=document.querySelector("#submit_location"),n=document.querySelector("#input_location"),o=document.querySelector("main"),r=document.querySelector("#imperial"),c=document.querySelector("#metric"),a=(bodymovin.loadAnimation({container:document.querySelector("#loading-animation-container"),renderer:"svg",loop:!0,autoplay:!0,path:"https://assets9.lottiefiles.com/private_files/lf30_h7yc4tuw.json"}),()=>{document.querySelector("#loading-animation-container").remove()}),i=()=>{const t=n.value;e(t,"button_measurement-selected"==r.className?"imperial":"metric"),n.value=""},d=()=>{const t=document.querySelector("#current-city").textContent;e(t,"metric"),c.removeEventListener("click",d),r.addEventListener("click",u),r.className="button_measurement",c.className="button_measurement-selected"},u=()=>{const t=document.querySelector("#current-city").textContent;e(t,"imperial"),r.removeEventListener("click",u),c.addEventListener("click",d),r.className="button_measurement-selected",c.className="button_measurement"},s=()=>{o.style.background="var(--background_sunny)"},l=()=>{o.style.background="var(--background_cloudy)"},m=()=>{o.style.background="var(--background_rainy)"},y=()=>{o.style.background="var(--background_snowy)"};navigator.geolocation.getCurrentPosition((t=>{const n=t.coords.latitude;(async(t,n,o)=>{try{const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&units=${o}&appid=62559260c941ebf6fd752e2570f6c760`,{mode:"cors"}),c=(await r.json()).name;e(c,o),a()}catch(t){console.log("could not load local conditions"),console.error(t),e("New Orleans","imperial"),a()}})(t.coords.longitude,n,(()=>{let e;return"en-US"===navigator.language?e="imperial":(e="metric",d()),e})())}),(t=>{console.error(t),e("New Orleans","imperial"),a()})),document.onreadystatechange=function(){if("loading"===document.readyState){const e=document.createElement("div");e.id="load-screen",document.body.appendChild(e)}},window.addEventListener("load",(()=>{t.addEventListener("click",i),n.addEventListener("keypress",(e=>{"Enter"===e.key&&i()})),c.addEventListener("click",d)}))})();