(()=>{"use strict";const e=async(e,t)=>{try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=62559260c941ebf6fd752e2570f6c760`,{mode:"cors"}),o=await n.json();"city not found"==o.message&&(()=>{const e=document.querySelector("#location-container"),t=document.createElement("p");t.textContent="Couldn't find this city. Please check your spelling",t.id="error_city",e.appendChild(t),setTimeout((function(){t.remove()}),4e3)})();const r=o.name,c=o.main.temp,i=o.main.feels_like,a=o.main.humidity,u=o.weather[0].main,y=o.wind.speed,p=e=>{document.querySelector("#current-city").textContent=e},h=e=>{document.querySelector("#current-conditions").textContent=e},g=e=>{document.querySelector("#current-humidity").textContent=`Humidity:  ${e}%`},S=e=>{const t=Math.round(e);document.querySelector("#current-feel").textContent=`Feels Like: ${t}째`},w=e=>{const n=Math.round(e);document.querySelector("#current-wind").textContent="imperial"==t?`Wind: ${n} mph`:`Wind: ${n} kph`};(e=>{const t=Math.round(e);document.querySelector("#current-temperature").textContent=t+"째"})(c),p(r),h(u),g(a),S(i),w(y),"Clouds"==u?s():"Mist"==u||"Rain"==u?l():"Snow"==u?m():d()}catch(e){console.error("Something went wrong with the current conditions")}},t=document.querySelector("#submit_location"),n=document.querySelector("#input_location"),o=document.querySelector("main"),r=document.querySelector("#imperial"),c=document.querySelector("#metric"),i=()=>{const t=n.value;e(t,"button_measurement-selected"==r.className?"imperial":"metric")},a=()=>{const t=document.querySelector("#current-city").textContent;e(t,"metric"),c.removeEventListener("click",a),r.addEventListener("click",u),r.className="button_measurement",c.className="button_measurement-selected"},u=()=>{const t=document.querySelector("#current-city").textContent;e(t,"imperial"),r.removeEventListener("click",u),c.addEventListener("click",a),r.className="button_measurement-selected",c.className="button_measurement"},d=()=>{o.style.background="var(--background_sunny)"},s=()=>{o.style.background="var(--background_cloudy)"},l=()=>{o.style.background="var(--background_rainy)"},m=()=>{o.style.background="var(--background_snowy)"};navigator.geolocation.getCurrentPosition((t=>{const n=t.coords.latitude;(async(t,n,o)=>{try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&units=${o}&appid=62559260c941ebf6fd752e2570f6c760`,{mode:"cors"}),r=await e.json();"city not found"==r.message&&displayUserError();const c=r.name,i=r.main.temp,a=r.main.feels_like,u=r.main.humidity,y=r.weather[0].main,p=r.wind.speed,h=e=>{document.querySelector("#current-city").textContent=e},g=e=>{document.querySelector("#current-conditions").textContent=e},S=e=>{document.querySelector("#current-humidity").textContent=`Humidity:  ${e}%`},w=e=>{const t=Math.round(e);document.querySelector("#current-feel").textContent=`Feels Like: ${t}째`},k=e=>{const t=Math.round(e);document.querySelector("#current-wind").textContent="imperial"==o?`Wind: ${t} mph`:`Wind: ${t} kph`};(e=>{const t=Math.round(e);document.querySelector("#current-temperature").textContent=t+"째"})(i),h(c),g(y),S(u),w(a),k(p),"Clouds"==y?s():"Mist"==y||"Rain"==y?l():"Snow"==y?m():d()}catch(t){console.log("could not load local conditions"),console.error(t),e("New Orleans","imperial")}})(t.coords.longitude,n,(()=>{let e;return"en-US"===navigator.language?e="imperial":(e="metric",a()),e})())}),(t=>{console.error(t),e("New Orleans","imperial")})),document.onreadystatechange=function(){if("loading"===document.readyState){const e=document.createElement("div");e.id="load-screen",document.body.appendChild(e)}},window.addEventListener("load",(()=>{t.addEventListener("click",i),n.addEventListener("keypress",(e=>{"Enter"===e.key&&i()})),c.addEventListener("click",a)}))})();